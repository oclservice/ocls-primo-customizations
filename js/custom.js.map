{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/01OCLS_ALGON-ALGON/js/main.js","primo-explore/custom/01OCLS_ALGON-ALGON/js/ocls-clear-display/index.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","angular","controller","$scope","vm","this","$onInit","$watch","isDefined","parentCtrl","services","console","log","clearResourceName","clearLink","publicNote","match","clearBaseUrl","component","bindings"],"mappings":"AAAA,CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,GAAA,CAAAJ,EAAAG,GAAA,CAAA,GAAA,CAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,YAAA,OAAAC,SAAAA,QAAA,GAAA,CAAAF,GAAAC,EAAA,OAAAA,EAAAF,EAAA,CAAA,CAAA,EAAA,GAAAI,EAAA,OAAAA,EAAAJ,EAAA,CAAA,CAAA,EAAA,MAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,GAAA,GAAAO,KAAA,mBAAAF,CAAA,CAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,EAAA,EAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,CAAA,CAAA,EAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,CAAA,CAAA,CAAA,OAAAD,EAAAG,GAAAS,OAAA,CAAA,IAAA,IAAAL,EAAA,YAAA,OAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,CAAA,GAAAD,EAAAD,EAAAE,EAAA,EAAA,OAAAD,CAAA,EAAA,CAAAa,EAAA,CAAA,SAAAT,EAAAU,EAAAJ,G,aCAAN,EAAA,sBAAA,EAEUW,QAAQD,OAAO,aAAc,CAAC,cAAe,mBAA7C,C,8DCCVC,QACKD,OAAO,mBAAoB,EADhC,EAGKE,WAAW,6BAA8B,CAAC,SAAU,SAAUC,GAC3D,IAAIC,EAAKC,KACTA,KAAKC,QAAU,WACXH,EAAOI,OACH,WACI,OAAIN,QAAQO,UAAUJ,EAAGK,WAAWC,QAAhC,EAEON,EAAGK,WAAWC,SAElB,CACV,EACD,WAEI,GAAIT,QAAQO,UAAUJ,EAAGK,WAAWC,QAAhC,EAA0C,CAC1CC,QAAQC,IAAI,0BAAZ,EAKA,IAHA,IAAIF,EAAWN,EAAGK,WAAWC,SAGrBvB,EAAI,EAAGA,EAAIuB,EAASZ,OAAQX,CAAA,GAAI,CACpCwB,QAAQC,IAAIF,EAASvB,EAArB,EACA,IAIQ0B,EAJJC,EAAYJ,EAASvB,GAAG4B,WAAWC,MAAM,uDAA7B,EACO,EAAnBF,EAAUhB,SACNmB,EAAeH,EAAU,GAC7BH,QAAQC,IAAIK,CAAZ,EACIJ,EAAoBC,EAAU,GAClCH,QAAQC,IAAIC,CAAZ,EAOP,CAEJ,CACJ,CAjCL,CAmCH,CACJ,EA1CL,EA4CKK,UAAU,0BAA2B,CAClCC,SAAU,CAAEV,WAAY,GAAd,EACVP,WAAY,4BAFsB,CA5C1C","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import './ocls-clear-display';\r\n\r\nvar app = angular.module('viewCustom', ['angularLoad', 'oclsClearDisplay']);","// Display OUR/CLEAR permitted uses directly in Primo\n// Requires an URL to the OUR/CLEAR resource inside the\n\nangular\n    .module('oclsClearDisplay', [])\n\n    .controller('oclsClearDisplayController', ['$scope', function ($scope) {\n        var vm = this;\n        this.$onInit = function() {\n            $scope.$watch(\n                function () {\n                    if (angular.isDefined(vm.parentCtrl.services)) {\n                        // As soon as there are location details, watch for changes in the list of location items\n                        return vm.parentCtrl.services;\n                    }\n                    return 0;\n                },\n                function () {\n                    // This listener function is called both during initial run and whenever the watched variable changes.\n                    if (angular.isDefined(vm.parentCtrl.services)){\n                        console.log('OCLS CLEAR display start');\n                        \n                        var services = vm.parentCtrl.services;\n                        \n                        // Go through the list of available services and look for OUR/CLEAR URLs\n                        for(var i = 0; i < services.length; i++){\n                            console.log(services[i]);\n                            var clearLink = services[i].publicNote.match(/href=\"(.+\\.scholarsportal\\.info\\/licenses\\/)([^\"]+)\\\"/);\n                            if (clearLink.length > 0){\n                                var clearBaseUrl = clearLink[1];\n                                console.log(clearBaseUrl);\n                                var clearResourceName = clearLink[2];\n                                console.log(clearResourceName);\n                                \n                                \n                                \n                            }\n                            \n                            \n                        }\n                         \n                    }\n                }\n            );\n        }\n    }])\n\n    .component('prmAlmaViewitItemsAfter', {\n        bindings: { parentCtrl: '<' },\n        controller: 'oclsClearDisplayController'\n    });"]}